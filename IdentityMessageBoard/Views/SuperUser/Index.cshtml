@model IDictionary<string, List<Message>>

<h2>Active Messages</h2>

<a asp-controller="Messages" asp-action="New"><button>Add New Message</button></a>

<table class="table mt-5">
    <thead>
        <tr>
            <th scope="col">Author</th>
            <th scope="col">Content</th>
            <th scope="col">Expiration Date</th>
            <th scope="col">Edit</th> <!-- New Header for Edit -->
            <th scope="col">Delete</th> <!-- New Header for Delete -->
        </tr>
    </thead>
    @foreach (var message in Model["active"])
    {
        @if (message.Author is null)
        {
            <tr>
                <td>Anonymous</td>
                <td>@message.Content</td>
                <td>@message.ExpirationDate.ToShortDateString()</td>
                <td><a href="@Url.Action("Edit", "Messages", new { id = message.Id })" class="btn btn-primary">Edit</a></td> <!-- Edit Button -->
                <td>
                    <form method="post" action="@Url.Action("Delete", "Messages", new { id = message.Id })">
                        <input type="submit" value="Delete" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this?');" />
                    </form>
                </td> <!-- Delete Button (with confirmation) -->
            </tr>
        }
        else
        {
            <tr>
                <td>@message.Author.Email</td>
                <td>@message.Content</td>
                <td>@message.ExpirationDate.ToShortDateString()</td>
                <td><a href="@Url.Action("Edit", "Messages", new { id = message.Id })" class="btn btn-primary">Edit</a></td> <!-- Edit Button -->
                <td>
                    <form method="post" action="@Url.Action("Delete", "Messages", new { id = message.Id })">
                        <input type="submit" value="Delete" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this?');" />
                    </form>
                </td> <!-- Delete Button (with confirmation) -->
            </tr>
        }
    }
</table>

<h2>Expired Messages</h2>
<table class="table mt-5">
    <thead>
        <tr>
            <th scope="col">Author</th>
            <th scope="col">Content</th>
            <th scope="col">Expiration Date</th>
            <th scope="col">Edit</th> <!-- New Header for Edit -->
            <th scope="col">Delete</th> <!-- New Header for Delete -->
        </tr>
    </thead>
    @foreach (var message in Model["expired"])
    {
        @if (message.Author is null)
        {
            <tr>
                <td>Anonymous</td>
                <td>@message.Content</td>
                <td>@message.ExpirationDate.ToShortDateString()</td>
                <td><a href="@Url.Action("Edit", "Messages", new { id = message.Id })" class="btn btn-primary">Edit</a></td> <!-- Edit Button -->
                <td>
                    <form method="post" action="@Url.Action("Delete", "Messages", new { id = message.Id })">
                        <input type="submit" value="Delete" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this?');" />
                    </form>
                </td> <!-- Delete Button (with confirmation) -->
            </tr>
        }
        else
        {
            <tr>
                <td>@message.Author.Email</td>
                <td>@message.Content</td>
                <td>@message.ExpirationDate.ToShortDateString()</td>
                <td><a href="@Url.Action("Edit", "Messages", new { id = message.Id })" class="btn btn-primary">Edit</a></td> <!-- Edit Button -->
                <td>
                    <form method="post" action="@Url.Action("Delete", "Messages", new { id = message.Id })">
                        <input type="submit" value="Delete" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this?');" />
                    </form>
                </td> <!-- Delete Button (with confirmation) -->
            </tr>
        }
    }
</table>